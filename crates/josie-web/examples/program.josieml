<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Josie Lisp Kitchen Sink</title>
</head>
<body class="bg-slate-950 text-slate-200 p-10 font-mono">
  <div class="max-w-xl mx-auto space-y-8">
    <header>
      <h1 class="text-2xl font-bold text-cyan-400">Josie Lisp Kitchen Sink</h1>
      <p class="text-slate-500 text-sm">Demonstrating recursion, math, and reactivity.</p>
    </header>

    <!-- Math and Reactivity -->
    <section class="border border-slate-800 p-4 rounded-xl bg-slate-900">
      <h2 class="text-xs uppercase tracking-widest text-slate-400 mb-4">1. Counter & Math</h2>
      <div class="flex items-center gap-4">
        <button @click="(set count (- count 1))" class="bg-slate-800 px-3 py-1 rounded">-</button>
        <span class="text-2xl text-white" j-text="client.count">0</span>
        <button @click="(set count (+ count 1))" class="bg-slate-800 px-3 py-1 rounded">+</button>
      </div>
      <div class="mt-4 text-sm">
        <p>Squared: <span j-text="(* count count)"></span></p>
        <p j-show="(> count 10)" class="text-emerald-400">Wow, that's high!</p>
      </div>
    </section>

    <!-- Recursion -->
    <section class="border border-slate-800 p-4 rounded-xl bg-slate-900">
      <h2 class="text-xs uppercase tracking-widest text-slate-400 mb-4">2. Recursion (Factorial)</h2>
      <div class="flex gap-2">
        <input type="number" j-model="client.factInput" class="bg-slate-950 border border-slate-700 rounded px-2 py-1 w-20">
        <button @click="(set factResult (call fact factInput))" class="bg-cyan-600 text-white px-4 py-1 rounded">Calculate</button>
      </div>
      <p class="mt-4">Result: <span class="text-cyan-300" j-text="client.factResult"></span></p>
    </section>

    <!-- Lists -->
    <section class="border border-slate-800 p-4 rounded-xl bg-slate-900">
      <h2 class="text-xs uppercase tracking-widest text-slate-400 mb-4">3. Functional Lists</h2>
      <div class="space-y-2">
        <div data-josie-map='{"source":"client.items"}'>
          <span class="inline-block bg-slate-800 px-2 py-1 rounded text-xs mr-2" j-text="local.item"></span>
        </div>
        <button @click="(set items (filter items (!= item 3)))" class="text-xs text-rose-400 hover:underline">Remove '3' from list</button>
      </div>
    </section>
  </div>

  <script type="josie/script">
    # Initial State
    (set client.count 0)
    (set client.factInput 5)
    (set client.factResult 0)
    (set client.items [1 2 3 4 5])

    # Recursive Factorial Function
    (def fact (n)
      (if (<= n 1)
          1
          (* n (call fact (- n 1)))))

    # Initial Calculation
    (set client.factResult (call fact client.factInput))
  </script>
</body>
</html>
